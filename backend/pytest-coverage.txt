============================= test session starts ==============================
platform linux -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0
rootdir: /home/runner/work/travelstyle/travelstyle/backend
configfile: pytest.ini
plugins: asyncio-1.0.0, xdist-3.8.0, anyio-4.9.0, mock-3.14.1, cov-6.2.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 55 items

tests/test_auth.py ........................                              [ 43%]
tests/test_chat.py .........                                             [ 60%]
tests/test_main.py .....                                                 [ 69%]
tests/test_recommendations.py .........                                  [ 85%]
tests/test_user.py ........                                              [100%]

=============================== warnings summary ===============================
../../../../../../opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/pydantic/_internal/_config.py:323
  /opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/pydantic/_internal/_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

tests/test_chat.py::TestChatEndpoints::test_chat_endpoint_success
  /opt/hostedtoolcache/Python/3.13.5/x64/lib/python3.13/site-packages/pydantic/main.py:253: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
- generated xml file: /home/runner/work/travelstyle/travelstyle/backend/pytest.xml -
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.13.5-final-0 ________________

Name                               Stmts   Miss  Cover   Missing
----------------------------------------------------------------
app/api/deps.py                       22     12    45%   22-39, 49-51
app/api/v1/auth.py                   117     38    68%   54-55, 73-75, 90-92, 114-115, 137-138, 163-164, 179, 190-192, 207, 232-233, 247-283
app/api/v1/recommendations.py         64     12    81%   48-50, 74-76, 96-98, 123-125
app/api/v1/user.py                    27      9    67%   27-29, 38-40, 52-54
app/core/security.py                  45     29    36%   26-56, 61-68, 72-78, 89, 94
app/main.py                           32      4    88%   27-30, 82
app/models/travel.py                 103    103     0%   5-133
app/models/user.py                    78     78     0%   5-102
app/services/auth_service.py         150    124    17%   39-41, 45-67, 71-81, 85-94, 102-109, 113-127, 137-174, 179-188, 194-203, 209-256, 260-273
app/services/currency_service.py      49     35    29%   33-62, 77-100
app/services/openai_service.py        55     35    36%   52-83, 93, 129-137, 141-154
app/services/orchestrator.py          73     56    23%   35-118, 129-133, 137, 143-177, 182-199
app/services/qloo_service.py          55     37    33%   36-72, 95-129, 141, 166, 186, 212
app/services/supabase_cache.py        73     56    23%   34-49, 62-75, 87-103, 117-131, 140-155, 168-181, 190-194
app/services/weather_service.py      108     90    17%   42-71, 82-103, 115-174, 185-187, 201-267
app/utils/error_handlers.py            9      1    89%   16
app/utils/rate_limiter.py             51     33    35%   34-36, 43-92, 101-110
app/utils/user_utils.py               12     11     8%   7-25
----------------------------------------------------------------
TOTAL                               1252    763    39%

11 files skipped due to complete coverage.
======================== 55 passed, 2 warnings in 0.80s ========================
